<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ni≈üancƒ± Oyunu</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#111;
  color:#fff;
  text-align:center;
}
.screen{display:none;padding:20px}
.active{display:block}
button{
  padding:14px 24px;
  margin:8px;
  font-size:18px;
  border:none;
  border-radius:12px;
  background:#ff5722;
  color:#fff;
}
#gameArea{
  width:90%;
  max-width:800px;
  height:400px;
  background:#000;
  margin:15px auto;
  position:relative;
}
.enemy{
  position:absolute;
  width:60px;
  height:60px;
  background:red;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.scorebox{
  max-width:300px;
  margin:auto;
  background:#222;
  padding:10px;
  border-radius:10px;
}
</style>
</head>

<body>

<!-- ƒ∞Sƒ∞M -->
<div id="nameScreen" class="screen active">
  <h1>ƒ∞smini Gir</h1>
  <input id="playerName" placeholder="ƒ∞smin" />
  <br><br>
  <button onclick="saveName()">Ba≈üla</button>
</div>

<!-- OYUN -->
<div id="gameScreen" class="screen">
  <h2>Skor: <span id="score">0</span></h2>
  <div id="gameArea"></div>
</div>

<!-- Bƒ∞Tƒ∞≈û -->
<div id="endScreen" class="screen">
  <h1>Oyun Bitti</h1>
  <p>Skorun: <b id="finalScore"></b></p>

  <h3>üåç Online Skor Tablosu</h3>
  <ul id="onlineScores" class="scorebox"></ul>

  <button onclick="location.reload()">Tekrar</button>
</div>

<!-- üî• FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
/* üî¥ BURAYI KENDƒ∞ FIREBASE Bƒ∞LGƒ∞LERƒ∞NLE DEƒûƒ∞≈ûTƒ∞R */
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJE.firebaseapp.com",
  databaseURL: "https://PROJE-default-rtdb.firebaseio.com",
  projectId: "PROJE",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* OYUN */
let score=0;
let name="";
const area=document.getElementById("gameArea");

function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function saveName(){
  name=document.getElementById("playerName").value.trim();
  if(!name){ alert("ƒ∞sim gir"); return; }
  show("gameScreen");
  spawnEnemy();
}

function spawnEnemy(){
  area.innerHTML="";
  const e=document.createElement("div");
  e.className="enemy";
  e.innerText="üßç";
  e.style.left=Math.random()*340+"px";
  e.style.top=Math.random()*300+"px";
  e.onclick=()=>{
    score+=10;
    document.getElementById("score").innerText=score;
    spawnEnemy();
  };
  area.appendChild(e);

  setTimeout(()=>{
    endGame();
  },10000);
}

function endGame(){
  show("endScreen");
  document.getElementById("finalScore").innerText=score;
  saveOnlineScore();
}

function saveOnlineScore(){
  db.ref("scores").push({
    name:name,
    score:score
  });
  loadScores();
}

function loadScores(){
  db.ref("scores").orderByChild("score").limitToLast(10)
  .on("value",snap=>{
    const list=document.getElementById("onlineScores");
    list.innerHTML="";
    const arr=[];
    snap.forEach(s=>arr.push(s.val()));
    arr.reverse().forEach(s=>{
      const li=document.createElement("li");
      li.innerText=`${s.name} - ${s.score}`;
      list.appendChild(li);
    });
  });
}
</script>

</body>
</html>
