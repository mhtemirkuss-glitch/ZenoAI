<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>NiÅŸancÄ± Oyunu</title>
  <style>
    body{font-family:Arial, sans-serif;background:#222;color:#fff;text-align:center;margin:0}
    .screen{display:none;padding:30px}
    .active{display:block}
    button{padding:14px 22px;font-size:18px;margin:10px;cursor:pointer}
    #hud{display:flex;gap:18px;justify-content:center;align-items:center;flex-wrap:wrap;margin:10px 0}
    #gameArea{
      width:min(900px, 95vw);
      height:60vh;
      min-height:380px;
      margin:18px auto 0;
      background:#111;
      border:2px solid #444;
      position:relative;
      overflow:hidden;
      border-radius:10px;
    }
    .enemy{
      position:absolute;
      width:70px;height:70px;
      border-radius:12px;
      background:#b33;
      display:flex;align-items:center;justify-content:center;
      user-select:none;
      font-size:34px;
      box-shadow:0 6px 18px rgba(0,0,0,.35);
      transform:scale(1);
      transition:transform .08s ease;
    }
    .enemy:active{transform:scale(0.95)}
    .msg{margin-top:12px;font-size:18px;color:#7CFC00;min-height:24px}
    .small{opacity:.85;font-size:14px}
  </style>
</head>
<body>

<!-- SÄ°LAH SEÃ‡Ä°M -->
<div id="weaponScreen" class="screen active">
  <h1>SilahÄ±nÄ± SeÃ§</h1>
  <button onclick="selectWeapon('Tabanca')">ğŸ”« Tabanca</button>
  <button onclick="selectWeapon('TÃ¼fek')">ğŸ”¥ TÃ¼fek</button>
  <button onclick="selectWeapon('Sniper')">ğŸ¯ Sniper</button>
  <div id="weaponMsg" class="msg"></div>
  <div class="small">SeÃ§ince â€œiyi seÃ§imâ€ mesajÄ± gelir ve seviye seÃ§imine geÃ§er.</div>
</div>

<!-- SEVÄ°YE SEÃ‡Ä°M -->
<div id="levelScreen" class="screen">
  <h1>Seviye SeÃ§</h1>
  <button onclick="startGame('easy')">ğŸŸ¢ Kolay</button>
  <button onclick="startGame('medium')">ğŸŸ¡ Orta</button>
  <button onclick="startGame('hard')">ğŸ”´ Zor</button>
  <div id="levelMsg" class="msg"></div>
</div>

<!-- OYUN -->
<div id="gameScreen" class="screen">
  <h1>Oyun</h1>

  <div id="hud">
    <div>Silah: <b id="hudWeapon">-</b></div>
    <div>Seviye: <b id="hudLevel">-</b></div>
    <div>Adam: <b id="hudCount">0</b>/20</div>
    <div>Vurulan: <b id="hudHit">0</b></div>
    <div>KaÃ§an: <b id="hudMiss">0</b></div>
    <div>Skor: <b id="hudScore">0</b></div>
  </div>

  <div id="gameArea"></div>

  <div style="margin-top:16px;">
    <button onclick="resetToMenu()">ğŸ” MenÃ¼ye DÃ¶n</button>
  </div>
  <div class="small">Ä°pucu: Adam Ã§Ä±kÄ±nca tÄ±kla. SÃ¼resi dolarsa kaÃ§ar.</div>
</div>

<!-- OYUN BÄ°TTÄ° -->
<div id="endScreen" class="screen">
  <h1>Oyun Bitti</h1>
  <p>Skor: <b id="finalScore">0</b></p>
  <p>Vurulan: <b id="finalHit">0</b> | KaÃ§an: <b id="finalMiss">0</b></p>
  <button onclick="resetToMenu()">ğŸ” Tekrar Oyna</button>
</div>

<script>
  // ---------- DURUM ----------
  let weapon = "";
  let level = "";
  let enemyVisibleMs = 5000;

  const TOTAL_ENEMIES = 20;

  let spawned = 0;
  let hit = 0;
  let miss = 0;
  let score = 0;

  let currentEnemyTimeout = null;
  let gameRunning = false;

  // ---------- EKRAN ----------
  function showScreen(id){
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
  }

  // ---------- 1) SÄ°LAH SEÃ‡ ----------
  function selectWeapon(w){
    weapon = w;
    document.getElementById("weaponMsg").textContent = "âœ… Ä°yi seÃ§im! (" + w + ")";
    setTimeout(() => {
      document.getElementById("weaponMsg").textContent = "";
      showScreen("levelScreen");
    }, 900);
  }

  // ---------- 2) SEVÄ°YE SEÃ‡ + OYUNU BAÅLAT ----------
  function startGame(lv){
    level = lv;

    if (lv === "easy") enemyVisibleMs = 5000;
    if (lv === "medium") enemyVisibleMs = 3000;
    if (lv === "hard") enemyVisibleMs = 2000;

    document.getElementById("levelMsg").textContent =
      "âœ… Seviye seÃ§ildi! BaÅŸlÄ±yoruzâ€¦ (" + (enemyVisibleMs/1000) + " sn)";

    setTimeout(() => {
      document.getElementById("levelMsg").textContent = "";
      initGame();
    }, 700);
  }

  function initGame(){
    // reset
    spawned = 0; hit = 0; miss = 0; score = 0;
    gameRunning = true;
    clearTimeout(currentEnemyTimeout);

    // hud
    document.getElementById("hudWeapon").textContent = weapon || "-";
    document.getElementById("hudLevel").textContent = levelLabel(level);
    updateHud();

    // temizle
    document.getElementById("gameArea").innerHTML = "";

    showScreen("gameScreen");
    spawnNextEnemy();
  }

  function levelLabel(lv){
    if(lv==="easy") return "Kolay";
    if(lv==="medium") return "Orta";
    if(lv==="hard") return "Zor";
    return "-";
  }

  function updateHud(){
    document.getElementById("hudCount").textContent = spawned;
    document.getElementById("hudHit").textContent = hit;
    document.getElementById("hudMiss").textContent = miss;
    document.getElementById("hudScore").textContent = score;
  }

  // ---------- 3) 20 ADAM Ã‡IKAR ----------
  function spawnNextEnemy(){
    if(!gameRunning) return;

    if (spawned >= TOTAL_ENEMIES){
      endGame();
      return;
    }

    spawned++;
    updateHud();

    const area = document.getElementById("gameArea");
    area.innerHTML = ""; // aynÄ± anda tek adam

    const enemy = document.createElement("div");
    enemy.className = "enemy";
    enemy.textContent = "ğŸ§";

    // rastgele konum (kenarlardan pay bÄ±rak)
    const pad = 10;
    const maxX = area.clientWidth - 70 - pad;
    const maxY = area.clientHeight - 70 - pad;
    const x = pad + Math.floor(Math.random() * Math.max(1, maxX));
    const y = pad + Math.floor(Math.random() * Math.max(1, maxY));
    enemy.style.left = x + "px";
    enemy.style.top  = y + "px";

    // vurunca
    enemy.onclick = () => {
      if(!gameRunning) return;
      clearTimeout(currentEnemyTimeout);
      hit++;
      score += weaponScore(weapon);
      updateHud();

      enemy.textContent = "ğŸ’¥";
      enemy.style.background = "#2b8a3e";

      setTimeout(() => spawnNextEnemy(), 180);
    };

    area.appendChild(enemy);

    // sÃ¼re dolarsa kaÃ§ar
    currentEnemyTimeout = setTimeout(() => {
      if(!gameRunning) return;
      miss++;
      updateHud();
      area.innerHTML = ""; // adam kaybolur
      setTimeout(() => spawnNextEnemy(), 120);
    }, enemyVisibleMs);
  }

  function weaponScore(w){
    // istersen deÄŸiÅŸtir: tÃ¼fek hÄ±zlÄ± ama dÃ¼ÅŸÃ¼k, sniper yÃ¼ksek
    if (w === "Tabanca") return 10;
    if (w === "TÃ¼fek")   return 8;
    if (w === "Sniper")  return 14;
    return 10;
  }

  function endGame(){
    gameRunning = false;
    clearTimeout(currentEnemyTimeout);

    document.getElementById("finalScore").textContent = score;
    document.getElementById("finalHit").textContent = hit;
    document.getElementById("finalMiss").textContent = miss;

    showScreen("endScreen");
  }

  function resetToMenu(){
    gameRunning = false;
    clearTimeout(currentEnemyTimeout);
    document.getElementById("gameArea").innerHTML = "";
    showScreen("weaponScreen");
  }
</script>

</body>
</html>
